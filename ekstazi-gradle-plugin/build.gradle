plugins {
    id 'java'
    id "maven-publish"
}

java {
    sourceCompatibility = '17'
    targetCompatibility = '17'
}

group = 'com.kageiit'
version = '0.1.0'

repositories {
    mavenCentral()
    jcenter()
    maven { url 'https://repo.gradle.org/gradle/libs-releases' }
}

dependencies {
    implementation gradleApi()
}

task sourcesJar(type: Jar) {
    from sourceSets.main.allSource
    archiveClassifier.set('sources')
}

def siteUrl = 'https://github.com/kageiit/ekstazi-gradle-plugin'
def gitUrl = 'https://github.com/kageiit/ekstazi-gradle-plugin.git'

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.java
            artifact sourcesJar
            artifactId = 'ekstazi-gradle-plugin'
        }
    }
    repositories {
        maven {
            name = "MavenCentral"
            url = "https://oss.sonatype.org/service/local/staging/deploy/maven2/"
            credentials {
                username = findProperty("mavenCentralUsername") ?: System.getenv("MAVEN_CENTRAL_USERNAME")
                password = findProperty("mavenCentralPassword") ?: System.getenv("MAVEN_CENTRAL_PASSWORD")
            }
        }
    }
}
